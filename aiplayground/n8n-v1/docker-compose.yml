services:
  n8n:
    container_name: n8n-v1
    image: n8nio/n8n:1.121.3
    ports:
      - "5678:5678"
    environment:
      # Core server config
      N8N_HOST: "localhost"
      N8N_PORT: "5678"
      N8N_PROTOCOL: "http"
      WEBHOOK_URL: "http://localhost:5678/"

      N8N_SECURE_COOKIE: "false"

      # Database: SQLite (default)
      DB_TYPE: "sqlite"
      DB_SQLITE_VACUUM_ON_STARTUP: "true"

      # Avoid telemetry noise in local experiments
      N8N_DIAGNOSTICS_ENABLED: "false"
      N8N_VERSION_NOTIFICATIONS_ENABLED: "false"

    volumes:
      - ./n8n_data:/home/node/.n8n

    restart: unless-stopped
    env_file:
      - ./.env
